/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

class Log {
    constructor() {
        this.warn = console.warn;
    }
    setUp(plugin) {
        this.isDev = plugin.manifest.name.toLowerCase().contains('canary');
        if (this.isDev) {
            this.info = console.info;
        }
    }
    info(..._) {
        // empty function in non dev envs
    }
}
const log = new Log();

const DEFAULT_WIDTH = 500;
const DEFAULT_HEIGHT = 500;
const DEFAULT_BUFFER = 100;
// recursive function that calls itself to create a list of nodes and edges
// to add to the canvas
// Some notes
// - it only allows unique notes
// - it priotises notes that have a lower depth overwriting notes that already exist
// - Supports incoming and outgoing links
function createChildren(path, resolvedLinks, depth, direction = 'outgoing', canvasHashes = [{}, {}], num = 0, rowCount = {}) {
    log.info(path, depth, num);
    const isOutgoing = direction === 'outgoing';
    if (!rowCount[num]) {
        rowCount[num] = 0;
    }
    let [returnedNodes, returnedEdges] = canvasHashes;
    const fileLinks = Object.keys(resolvedLinks[path] || {});
    // if returnedNodes is empty we can assume this is the first round and we add
    // it to the returnedNodes hash
    if (Object.keys(returnedNodes).length === 0) {
        returnedNodes[path] = {
            id: path,
            width: DEFAULT_WIDTH,
            height: DEFAULT_HEIGHT,
            y: (fileLinks.length * (DEFAULT_HEIGHT + DEFAULT_BUFFER)) / 2 -
                DEFAULT_HEIGHT / 2,
            x: 0,
            type: 'file',
            file: path,
            color: '1',
        };
    }
    // we use this to do a comparison to make a decision about if the level
    // of the current node is lower then the previous version of the node (if exists)
    const currentLevelXValue = (DEFAULT_WIDTH + 500) * (num + 1);
    for (let i = 0; i < fileLinks.length; i++) {
        const link = fileLinks[i];
        log.info(Array.from(new Array(num))
            .map(() => '--')
            .join(''), num, link);
        // checks that node doesn't already exist and if it does it's x (using as a
        // reresentation of level) is higher then the new node then we override it.
        if (!returnedNodes[link] || returnedNodes[link].x > currentLevelXValue) {
            returnedNodes[link] = {
                id: link,
                width: DEFAULT_WIDTH,
                height: DEFAULT_HEIGHT,
                x: isOutgoing ? currentLevelXValue : 0 - currentLevelXValue,
                y: rowCount[num] * (DEFAULT_HEIGHT + DEFAULT_BUFFER),
                type: 'file',
                file: link,
            };
            rowCount[num] = rowCount[num] + 1;
        }
        const edgeId = `${path}-${link}`;
        returnedEdges[edgeId] = {
            id: edgeId,
            fromSide: 'right',
            toSide: 'left',
            fromNode: isOutgoing ? path : link,
            toNode: isOutgoing ? link : path,
        };
        if (num < depth) {
            const nextDepth = num + 1;
            const [childNodes, childEdges] = createChildren(link, resolvedLinks, depth, direction, [returnedNodes, returnedEdges], nextDepth, rowCount);
            returnedNodes = Object.assign(Object.assign({}, returnedNodes), childNodes);
            returnedEdges = Object.assign(Object.assign({}, returnedEdges), childEdges);
        }
    }
    return [returnedNodes, returnedEdges];
}
function createCanvasFromFile(activeFile, resolvedLinks, doesFileExist, createFile, openFile) {
    return __awaiter(this, void 0, void 0, function* () {
        const { path: filePath, basename: fileName } = activeFile;
        const resolvedIncomingLinks = buildResolvedIncomingLinks(resolvedLinks);
        // TODO: create a combined resolved links so we're not passing two different ones
        // to the same func
        const [outgoingNodes, outgoingEdges] = createChildren(filePath, resolvedLinks, 1);
        const [incomingNodes, incomingEdges] = createChildren(filePath, resolvedIncomingLinks, 0, 'incoming', [outgoingNodes, outgoingEdges]);
        const nodes = Object.values(incomingNodes);
        const edges = Object.values(incomingEdges);
        const canvas = { nodes, edges };
        log.info(canvas);
        const path = getFileName(`${fileName}-canvas.canvas`, doesFileExist);
        const result = yield createFile(path, JSON.stringify(canvas, null, 2));
        openFile(result);
        log.info(result);
        return result;
    });
}
// buildResolvedIncomingLinks takes the outgoingResolvedLinks and flips it to
// incoming links where the top level key is the path and the record value is a
// is a record with the keys being other paths that point to it. The number value is not used
// and set to one
const buildResolvedIncomingLinks = (resolvedLinks) => {
    const resolvedIncomingLinks = {};
    Object.entries(resolvedLinks).forEach(([linker, destination]) => {
        Object.keys(destination).forEach((path) => {
            if (!resolvedIncomingLinks[path]) {
                resolvedIncomingLinks[path] = {};
            }
            resolvedIncomingLinks[path][linker] = 1;
        });
    });
    return resolvedIncomingLinks;
};
// getFileName looks for a safe file name to use and returns it.
// will take the path and add -n to the end until I finds one that doesn't
// exist
const getFileName = (path, doesFileExist) => {
    if (!doesFileExist(path)) {
        return path;
    }
    const limit = 50;
    const [name, extention] = path.split('.');
    for (let i = 0; i < limit; i++) {
        const newPath = `${name}-${i}.${extention}`;
        log.info(newPath);
        if (!doesFileExist(newPath)) {
            return newPath;
        }
    }
    log.warn(`no paths avialable for ${path}`);
};

class LinkExploderPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            log.setUp(this);
            log.info(`${this.manifest.name} Loaded`);
            this.addCommand({
                id: 'link-exploder-canvas-builder',
                name: 'Create Canvas From File Links',
                checkCallback: (checking) => {
                    if (checking) {
                        return true;
                    }
                    const activeFile = this.app.workspace.getActiveFile();
                    if (activeFile) {
                        const doesFileExist = (path) => Boolean(this.app.metadataCache.getCache(path));
                        const createFile = (path, data) => this.app.vault.create(path, data);
                        const openFile = (currentFile) => this.app.workspace.getLeaf().openFile(currentFile);
                        createCanvasFromFile(activeFile, this.app.metadataCache.resolvedLinks, doesFileExist, createFile, openFile).catch((e) => {
                            new obsidian.Notice(`Something went wrong with creating the canvas: ${e}`);
                            console.error(e);
                        });
                    }
                },
            });
            if (this.manifest.name.contains('Canary')) {
                this.addCommand({
                    id: 'reloadLinkExploder',
                    name: 'Reload LinkExploder (dev)',
                    callback: () => {
                        const id = this.manifest.id;
                        // @ts-ignore - for this.app.plugins
                        const plugins = this.app.plugins;
                        plugins.disablePlugin(id).then(() => plugins.enablePlugin(id));
                        new obsidian.Notice('Reloading LinkExploder');
                    },
                    hotkeys: [{ key: 'r', modifiers: ['Mod', 'Shift'] }],
                });
            }
        });
    }
    onunload() {
        log.info('unloading link exploder');
    }
}

module.exports = LinkExploderPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4uL2xpYi9Mb2cudHMiLCIuLi9saWIvY2FudmFzL2NhbnZhcy50cyIsIi4uL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOm51bGwsIm5hbWVzIjpbIlBsdWdpbiIsIk5vdGljZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXVEQTtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMvRCxRQUFRLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7QUFDbkcsUUFBUSxTQUFTLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMs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
